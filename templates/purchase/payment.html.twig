{% extends 'base.html.twig' %}

{% block title %}
pay your purchase oder with stripe
{% endblock %}


{% block body %}
<h1>Payment</h1>

<div class="card shadow round p-5  m-5">
    <form id="payment-form">
        <div id="card-element">
            <!--Stripe.js injects the Card Element-->
        </div>
        <button id="submit" class="btn btn-success mt-5">

            <div class="spinner hidden" id="spinner"></div>

            <span id="button-text">Pay now</span>

        </button>
        <p id="card-error" role="alert"></p>
    </form>
</div>
{% endblock %}
{% block javascripts %}
{{ parent() }}
    <script src="https://js.stripe.com/v3/"></script>
    <script>
      const clientSecret = "{{ clientSecret }}";
      const stripePublicKey = "{{ stripePublicKey }}";
      const redirectAftersuccessUrl = "{{ url('purchase_payment_success', {'id': purchase.id})}}";
    </script>
    <script src="/js/payment.js" ></script>
{% endblock %}